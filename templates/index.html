{% extends "base.html" %}

{% block title %}Risk Assessment - Home{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4 text-center">Risk Assessment</h1>

    <!-- Display Calculated Risk Score, Level, and Description -->
    {% if risk_score %}
        <div class="alert" style="background-color: {{ risk_color }}; color: white;">
            <strong>Your Risk Score is: {{ risk_score }} ({{ risk_level }})</strong>
            <p>{{ risk_description }}</p>
        </div>
    {% endif %}

    <!-- Risk Assessment Form -->
    <form method="POST" enctype="multipart/form-data">
        <!-- Likelihood Input -->
        <div class="form-group">
            <label for="likelihood">Likelihood (1-5):</label>
            <input type="number" id="likelihood" name="likelihood" min="1" max="5" required class="form-control">
            <div class="invalid-feedback">Please enter a value between 1 and 5.</div>
        </div>

        <!-- Impact Input -->
        <div class="form-group">
            <label for="impact">Impact (1-5):</label>
            <input type="number" id="impact" name="impact" min="1" max="5" required class="form-control">
            <div class="invalid-feedback">Please enter a value between 1 and 5.</div>
        </div>

        <!-- Severity Input -->
        <div class="form-group">
            <label for="severity">Severity (1-5):</label>
            <input type="number" id="severity" name="severity" min="1" max="5" required class="form-control">
            <div class="invalid-feedback">Please enter a value between 1 and 5.</div>
        </div>

        <!-- Frequency Input -->
        <div class="form-group">
            <label for="frequency">Frequency (1-5):</label>
            <input type="number" id="frequency" name="frequency" min="1" max="5" required class="form-control">
            <div class="invalid-feedback">Please enter a value between 1 and 5.</div>
        </div>

        <!-- Detailed Description -->
        <div class="form-group">
            <label for="description">Detailed Description:</label>
            <textarea id="description" name="description" class="form-control" rows="4"></textarea>
        </div>

        <!-- File Upload -->
        <div class="form-group">
            <label for="file">Attach File (optional):</label>
            <input type="file" id="file" name="file" class="form-control-file">
        </div>

        <!-- Submit and Reset Buttons -->
        <button type="submit" class="btn btn-primary btn-block">Calculate Risk</button>
        <button type="reset" class="btn btn-secondary btn-block">Reset Form</button>
    </form>

    <!-- Buttons for CSV and PDF -->
    <div class="mt-3 d-flex justify-content-between">
        <a href="{{ url_for('export_csv') }}" class="btn btn-success" role="button">Download CSV Report</a>
        <a href="{{ url_for('download_report') }}" class="btn btn-info" role="button">Download PDF Report</a>
    </div>
</div>
{% endblock %}